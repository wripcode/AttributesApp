/// <reference path="./styles.d.ts" />
/// <reference path="./pages.d.ts" />
/// <reference path="./elements.d.ts" />
/// <reference path="./components.d.ts" />
/// <reference path="./variables.d.ts" />

declare global {
  const webflow: WebflowApi;
}

interface WebflowApi {
  getSiteInfo(): Promise<{siteId: string; siteName: string; shortName: string}>;
  getSelectedElement(): Promise<null | AnyElement>;
  getMediaQuery(): Promise<BreakpointId>;
  registerComponent(name: string, rootElement: AnyElement): Promise<Component>;
  unregisterComponent(component: Component): Promise<void>;
  getAllComponents(): Promise<Array<Component>>;
  enterComponent(instance: ComponentElement): Promise<void>;
  exitComponent(): Promise<void>;
  getRootElement(): Promise<null | AnyElement>;
  getAllElements(): Promise<Array<AnyElement>>;
  createStyle(name: string): Style;
  getStyleByName(name: string): Promise<null | Style>;
  getAllStyles(): Promise<Array<Style>>;
  getCurrentPage(): Promise<Page>;
  getAllPagesAndFolders(): Promise<Array<Page | Folder>>;
  createFolder(): Promise<Folder>;
  createPage(): Promise<Page>;
  switchPage(page: Page): Promise<void>;
  createInstance(component: Component): ComponentElement;
  createString(text: string): StringElement;
  createDOM(tag: string): DOMElement;
  createHeading(tag: 1 | 2 | 3 | 4 | 5 | 6): HeadingElement;
  getDefaultVariableCollection(): Promise<null | VariableCollection>;
  setExtensionSize(
    size: 'default' | 'comfortable' | 'large' | {width: number; height: number}
  ): Promise<null>;
  notify(opts: {
    type: 'Error' | 'Info' | 'Success';
    message: string;
  }): Promise<void>;
  subscribe(
    event: 'selectedelement',
    callback: (element: null | AnyElement) => void
  ): Unsubscribe;
  subscribe(
    event: 'mediaquery',
    callback: (breakpoint: BreakpointId) => void
  ): Unsubscribe;
  subscribe(event: 'currentpage', callback: (page: Page) => void): Unsubscribe;
  getIdToken(): Promise<string>;
}

type Unsubscribe = () => undefined;

export {};
